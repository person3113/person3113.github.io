---
title: "[Oracle SQL 강의(뉴렉처)] 16 ~ 22강"
excerpt: "관계연산자 / 패턴 비교 연산자 / 정규식을 이용한 패턴 비교 / 행 제한하기 / DISTINCT"

categories:
  - Learning-DB
tags:
  - [Oracle, SQL]

toc: true
toc_sticky: true
toc_label: "페이지 주요 목차"

date: 2023-01-12
last_modified_at: 2023-01-12
---

<br>

# [유튜브 강의 주소](https://www.youtube.com/watch?v=pGlkIFrY9QY&list=PLq8wAnVUcTFVq7RD1kuUwkdWabxvDGzfu)

<br>

# 보는 방법

- 강의가 화면 자료에 내용 설명이 적고, 적당히 설명해서 구체적으로 메모 힘들다. 따라서 키워드 위주로만 적었다.
- 강의 내용 복습은 메모한 것뿐만 아니라 강의 영상도 봐라.
- 여기서는 다음을 기록.
  - 강의 목차와 키워드 및 내용
  - 강의를 보고 생긴 의문에 대해 구글링해서 찾은 내용

<br><br>

# 16강 - 관계연산자(AND, OR, BETWEEN, IN)

## 강의 내용

- AND, BETWEEN
  - 조회수가 0,1,2인 게시글을 조회하시오
    - `SELECT * FROM NOTICE WHERE HIT>=0 AND HIT<=2;`
    - `SELECT * FROM NOTICE WHERE HIT BETWEEN 0 AND 2;`
- OR, IN
  - 조회수가 0,2,7인 게시글을 조회하시오
    - `SELECT * FROM NOTICE WHERE HIT=0 OR HIT=2 OR HIT=7;`
    - `SELECT * FROM NOTICE WHERE HIT IN(0, 2, 7);`
- NOT
  - 조회수가 0,2,7이 아닌 게시글을 조회하시오
  - `SELECT * FROM NOTICE WHERE HIT NOT IN(0, 2, 7);`

<br><br>

# 17강 - 패턴 비교 연산자(LIKE, %, `_` )

## 강의 내용

- 회원 중에서 박씨 성을 조회하시오
  - `SELECT * FROM MEMBER WHERE NAME LIKE '박%';`
  - LIKE 연산자: `SELECT FROM MEMBER WHERE NAME = '박%';`로 하면 실제로 이름이 '박%'인 사람만 조회하는 것임. 내가 원하는 건 박으로 시작하는 패턴이니까 이 때는 LIKE를 써야 함.
  - % 연산자: `WHERE NAME LIKE '박%'`의 뜻은 박으로 시작하는 이름을 필터링함.
- 회원 중에서 박씨이고 이름이 외자(한글자)인 회원을 조회하시오
  - `SELECT * FROM MEMBER WHERE NAME LIKE '박_';`
  - `-` 연산자: `WHERE NAME LIKE '박_'`의 뜻은 박으로 시작하는 이름을 필터링함. 단 글자 수 제한이 있음. 여기선 `박_`이니까 박제, 박사같은 이름만 검색될 것이고, `박__`이면 박일이, 박삼사같이 이름이 두 글자인 사람만 검색될 것임.
- 회원 중에서 박씨 성을 제외한 회원을 조회하시오
  - `SELECT * FROM MEMBER WHERE NAME NOT LIKE '박%';`
- 회원 중에서 이름에 '도'자가 들어간 회원을 조회하시오
  - `SELECT * FROM MEMBER WHERE NAME LIKE '%도%';`

<br><br>

# 18강 - 정규식을 이용한 패턴 비교(REGEXP_LIKE)

## 강의 내용

- 정규표현식 찾고 테스트할 수 있는 사이트: [Regular Expression Library](https://regexlib.com/?AspxAutoDetectCookieSupport=1)
- 아래 6개 패턴의 전화번호만 조회하고 싶을 때 정규표현식을 작성하기
  - 010-1234-1234, 011-342-6453, 016-543-1564, 017-522-1114, 018-543-1564,019-773-2264,
  - `^01[016-9]-\d{3,4}-\d{4}$`
    - ^와 $: 정규표현식에서 시작을 뜻하는 게 ^고, 끝을 나타내는 게 $이다.
    - 단 이렇게 하면 위의 전화번호 패턴만 있으면 찾을 수 있지만, "ASD 010-1234-1234 ASD"같이 섞여있으면 안된다. 왜냐면 ^가 있기 때문에 무조건 01[]로 시작하고, $가 있기 때문에 무조건 1234처럼 끝나야지만 찾을 수 있다. 따라서 이런 경우에는 ^와 $를 빼야 한다.
    - `01[016-9]`: []는 하나의 글자를 나타냄. 또 6-9의 뜻은 6에서 9까지란 의미(즉 6,7,8,9)이다. 따라서 `01[016-9]`의 뜻은 01로 시작하고 나머지 한 글자는 0이거나 1 또는 6 또는 6~9일 수 있따는 뜻.
    - \d{3,4}
      - \d는 decimal digit(a digit from 0 to 9 in decimal notation)이란 뜻으로, `[0-9]`와 동일하다.
      - {3,4}: 예로 ab{2}라 하면 abb가 된다. 즉 앞의 문자를 {}안에 지정한 숫자만큼 반복한다는 뜻이다. 따라서 \d{3,4}의 뜻은 \d\d\d 또는 \d\d\d\d를 뜻한다.
- REGEXP_LIKE
  - regular expression function이다.
  - 제목에 전화번호가 포함된 게시글을 조회하시오
    - (X) `SELECT * FROM NOTICE WHERE TITLE LIKE '01[016-9]-\d{3,4}-\d{4}';`: 오라클에서 제공하는 패턴 연산자(%나 `_`)가 아니고 정규표현식이기 때문에, LIKE를 쓸 수 없다.
    - (O) `SELECT * FROM NOTICE WHERE REGEXP_LIKE(TITLE, '01[016-9]-\d{3,4}-\d{4}');`

<br><br>

# 19강 - 문자열 비교를 위한 정규식(^\D\w+@...)

## 강의 내용

- 이메일을 정규표현식으로 표현. 단 끝은 org, net, com만 허용된다고 하자. 또한 123asd@123asd.com처럼 @ 앞뒤 단어의 시작이 숫자로 되면 안 된다고 하자.
  - `\D\w*@\D\w*.(org|net|com)`
    - `\D\w*`:
      - \D: Matches any nondigit. Equivalent to `[^0-9]`. 즉 0~9가 아닌 문자만 와야 하나만 와야 한다. @ 앞뒤 단어의 시작이 숫자로 되면 안 된다라는 조건이 있기 때문에 넣었다.
      - \w: Matches any word character. equivalent to `[a-zA-Z_0-9]`. 즉 소문자, 대문자, 언더바, 숫자를 포함하는 어떤 단어든 올 수 있다는 뜻이다.
      - `*`: 0 or more of previous expression. 즉 0개 이상이어야 한다는 뜻이다. `\w*`이란 뜻은 \w에 해당하는 문자가 0개 이상 와야한다는 뜻이다. 참고로 +는 1개 이상 와야한다는 뜻인데, \w+라 하면 \w에 해당하는 문자가 하나 이상 와야한다는 뜻이다. 이 때 \D를 해서 숫자가 아닌 문자를 하나 받았으므로 +가 아니라 `*`를 \w 뒤에다 썼다.
    - (org|net|com)
      - (): Logical grouping of part of an expression. 즉 이메일 끝 단어를 묶어준 것이다.
      - |: 단어를 구분해 주는 용도.

<br><br>

# 20강 - ROWNUM 그리고 행 제한하기

## 강의 내용

- 행 제한하기
  - 회원 목록에서 상위 5명만 조회하시오
    - ROWNUM: 이것은 SELECT해서 결과집합을 만들 때 만들어진다(간단히 말하면 SELECT할 때 만들어지는 번호). 즉 기존 테이블을 읽고 WHERE절에 해당하는 열을 결과집합에 넣을 때마다 1씩 증가하는 것이다. 따라서 `SELECT * FROM MEMBER WHERE ROWNUM BETWEEN 1 AND 5;`는 된다. 하지만 `SELECT * FROM MEMBER WHERE ROWNUM BETWEEN 6 AND 10;`은 빈 결과집합을 얻는다. ROWNUM은 무조건 1부터 자동으로 만들어지는데, 여기서 조건이 6부터 10이므로 모든 열이 해당되지 않아 아무것도 출력되지 않는다.
    - 그럼 ROWNUM이 결과집합 만들어질 때(즉 SELECT할 때) 생성되는 게 아니라 기존에 있었다면 가능할 것이다.
    - `SELECT * FROM (SELECT ROWNUM NUM, MEMBER.* FROM MEMBER) WHERE NUM BETWEEN 1 AND 5;`
      - `FROM (SELECT ROWNUM NUM, MEMBER.* FROM MEMBER)`: 먼저 MEMBER의 모든 컬럼(`MEMBER.*`)과 ROWNUM을 합쳐서 결과집합을 만든다. 이렇게 만든 결과집합에 대해 SELECT하겠다는 것이다.
      - `WHERE NUM BETWEEN 1 AND 5`: 앞에서 ROWNUM애 NUM이라는 별칭을 주었다. 이 별칭을 안 주고 `SELECT * FROM (~생략~) WHERE ROWNUM BETWEEN 6 AND 10;`처럼 했다면 WHERE의 ROWNUM은 기존의 ROWNUM(`FROM (SELECT ROWNUM, MEMBER.* FROM MEMBER)`해서 만들어진 ROWNUM)이 아니라, 새로 만들어지는 ROWNUM을 가리킨다. 따라서 아무것도 출력되지 않으므로, 이를 구분하기 위해서 별칭을 부여한 것이다.

<br><br>

# 21강 - 중복 값 제거하기 DISTINCT

## 강의 내용

- 중복 값 제거하기(DISTINCT)
  - 기존에 테이블에 19, 19, 19, 21, 23이 저장되어 있고, `SELECT AGE FROM MEMBER;`해서 저장된 값이 전부 나온다.
  - 하지만 이 때 종복되는 나이는 빼고 싶을 때, `SELECT DISTINCT AGE FROM MEMBER;`를 치면 결과로 19, 21, 23이 나온다. 즉 중복되는 나이 19가 빠진 것이다.

<br><br>

# 22강 - 중간요약과 함수 단원 안내

## 강의 내용

- 메모할 내용은 없었다.
